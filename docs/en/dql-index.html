<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Diffbot Query Language (DQL) · Docs Suite</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Diffbot&#x27;s Query Language (DQL) is used to search and filter the [Knowledge Graph](kg-index)."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Diffbot Query Language (DQL) · Docs Suite"/><meta property="og:type" content="website"/><meta property="og:url" content="https://diffbot.github.io/"/><meta property="og:description" content="Diffbot&#x27;s Query Language (DQL) is used to search and filter the [Knowledge Graph](kg-index)."/><meta property="og:image" content="https://diffbot.github.io/img/diagram.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://diffbot.github.io/img/diagram.svg"/><link rel="shortcut icon" href="/img/diffbot-head.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/app.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/diffbot_white.svg" alt="Docs Suite"/><h2 class="headerTitleWithLogo">Docs Suite</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/error-intro" target="_self">Debugging</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>In-Depth</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Knowledge Graph<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/en/kg-index">Knowledge Graph and Enhance Index</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-quickstart">Knowledge Graph Quick Start</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools and Usage</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/kg-accessing">Accessing Knowledge Graph</a></li><li class="navListItem"><a class="navItem" href="/docs/en/kg-clients">API Clients</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-excel">Diffbot Excel Add-In</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-endpoints">DQL Endpoints</a></li><li class="navListItem"><a class="navItem" href="/docs/en/kg-filtering">Filter Data Output</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">In-Depth</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/dql-index">Diffbot Query Language (DQL)</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-workflows">DQL Workflow Example</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-faq">DQL FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/en/dql-effective-queries">Creating Effective Queries</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/diffbot/docs/edit/master/docs/dql-index.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Diffbot Query Language (DQL)</h1></header><article><div><span><p>Diffbot's Query Language (DQL) is used to search and filter the <a href="kg-index">Knowledge Graph</a>.</p>
<p>The query argument contains the actual search contents you wish to perform on the knowledge graph. Multiple operators and values can be combined. Diffbot's query language is reminiscent of dot notation and uses the fields that are returned in the JSON response. To create a query, you use a combination of the fields along with the values that match those fields.</p>
<h2><a class="anchor" aria-hidden="true" id="query-types"></a><a href="#query-types" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Query Types</h2>
<p>There are two types of queries, <code>ID</code> and <code>Type</code>. Type is the most common.</p>
<h3><a class="anchor" aria-hidden="true" id="id"></a><a href="#id" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ID</h3>
<p>You can query the Knowledge Graph directly if you know the unique identifier (ID) of the entity you are interested in accessing. The query format is <code>id:id-string</code>.</p>
<p>For Example: To query for the Facebook entity, type <a href="https://app.diffbot.com/search/?query=id%3ACbm4UJoSuP1esww1rsLvu9g"><code>id:Cbm4UJoSuP1esww1rsLvu9g</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="type"></a><a href="#type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type</h3>
<p>For type queries, the format is <code>type:EntityType</code>. Entering a Type clause alone will return all entities of that type.</p>
<p>For example: To get all organization entities regardless of subtype (Corporation, Local Business, University, etc.) specify: <a href="https://app.diffbot.com/search/?query=type%3AOrganization&amp;from=0&amp;size=50&amp;active_tab=query"><code>type:Organization</code></a>.</p>
<p>A Type query allows us to use various query operators to describe search criteria.  We can search against the value of a specific field by defining a path from the root of the Diffbot ontology down to the desired terminal field.</p>
<p>For example: To get all companies in the United States sorted largest to smallest by number of employees, specify <a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.country.name%3A%22United+States%22+revSortBy%3AnbEmployeesMax&amp;from=0&amp;size=50&amp;active_tab=query"><code>type:Organization location.country.name:&quot;United States&quot; revSortBy:nbEmployeesMax</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="querying-with-multiple-fields"></a><a href="#querying-with-multiple-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Querying with Multiple Fields</h2>
<p>Multiple-field queries search across multiple independent field-value combinations, all of which must match in order for the query to match an entity.</p>
<p>A query can contain multiple search clauses, i.e. multiple fields all of which must match in order for an entity to be returned. To search across multiple fields, we separate our field-value combinations with a space.</p>
<p>For example: This query returns all organizations located in the city of San Francisco with more than 5000 employees across all of their locations: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+locations.city.name%3A%22San+Francisco%22+nbEmployeesMin%3E5000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization locations.city.name:&quot;San Francisco&quot; nbEmployeesMin&gt;5000</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="nested-query"></a><a href="#nested-query" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nested Query</h2>
<p>A nested query searches against nested fields. By wrapping multiple subfields of a field into a single query, it can return results for which all of those subfields match an entity at the same time.</p>
<p>In a previous example, we searched for all of the organizations located in San Francisco. Suppose we wanted to narrow our query to return only those organizations currently located in San Francisco. To do so we must find Organizations with a single <code>location</code> field for which <code>location.city.name</code> is <code>San Francisco</code>, and for which <code>isCurrent</code> is true.  We might try the following query: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+locations.city.name%3A%22San+Francisco%22+location.isCurrent%3Atrue&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization locations.city.name:&quot;San Francisco&quot; location.isCurrent:true</code></a></p>
<p>Unfortunately, this would not have the intended result. This query specifies that an Organization must have a location &quot;San Francisco&quot;, and that there must be a location for which isCurrent is true, but it does not specify that both must be true for the same location.</p>
<p>The correct way to approach such a problem is to nest the subfields we are searching on under the field for which we would like them both to apply, using curly braces.</p>
<p>For example: To get all organizations that are currently located in San Francisco, specify: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.{city.name:&quot;San Francisco&quot; isCurrent:true}</code></a>.</p>
<p>It is also possible to have nested queries within nested queries. Here is an example: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+ceo.%7Blocations.city.name%3A%22New+York%22+educations.%7Bdegree.name%3A%22Masters%22+institution.name%3A%22Harvard%22%7D%7D&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization ceo.{locations.city.name:&quot;San Francisco&quot; educations.{degree.name:&quot;Master’s&quot; institution.name:&quot;Stanford&quot;}}</code></a></p>
<p>This query will match all organizations whose CEO is located in San Francisco and has a Masters Degree from Stanford.</p>
<p>Note that the depth of your nested queries is only limited by the total number of characters in the query submitted. You can have nested queries within nested queries, within nested queries, and so on.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="facets"></a><a href="#facets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Facets</h2>
<p>Faceted queries allow you to gain insight into large data sets by displaying summary data about the values of some field, as they are represented across all entities returned by the primary query.  For instance, a faceted query could provide a list of the most widely-held skills of employees at a company and the number of employees possessing each of those skills.  A single facet query may return up to 1000 results.</p>
<p>To perform a faceted query, you first write your primary DQL query describing the entities you want to analyze, then add the facet keyword and specify the field you want summary data about.</p>
<p>We can use facet queries to view the entire list of values for some field, across an entire result set.</p>
<p>For example, to view a list of all sicClassification codes and their distribution across all companies in the KG, you can query:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+facet%3AsicClassification.code&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization facet:sicClassification.code</code></a>.</p>
<p>Or, to view a list of all industry tags associated with any organization in the KG, you can query: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+facet%3Acategories.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization facet:categories.name</code></a>.</p>
<p>If you wanted to narrow your results to only show industry tags applied to organizations located in San Francisco that have 5000 or more employees and have a SIC classification, you can add those criteria to limit the primary result set: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+nbEmployeesMin%3E%3D5000+has%3AsicClassification+facet%3Acategories.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.{city.name:&quot;San Francisco&quot; isCurrent:true} nbEmployeesMin&gt;=5000 has:sicClassification facet:categories.name</code></a></p>
<p>To view a breakdown of how SIC classification codes are distributed among corporations that had over $100,000,000 in revenue for the 2019 fiscal year, we can query: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+yearlyRevenues.%7Byear%3A2019+revenue.value%3E100000000%7D+facet%3AsicClassification.code&amp;from=0&amp;size=50&amp;active_tab=query"><code>type:Organization yearlyRevenues.{year:2019 revenue.value&gt;100000000} facet:sicClassification.code</code></a>.</p>
<p>Facet queries return values in order of greatest number of matching entities, allowing you to gain insight about the most frequent values for some field, at a glance.
For example, to find the most common universities attended by Facebook employees who also have skills in Java, you can query: <a href="https://app.diffbot.com/search/?query=type%3APerson+employments.%7BisCurrent%3Atrue+employer.name%3A%22Facebook%22%7D+skills.name%3A%22Java%22+facet%3Aeducations.institution.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Person employments.{isCurrent:true employer.name:&quot;Facebook&quot;} skills.name:&quot;Java&quot; facet:educations.institution.name</code></a></p>
<p>Or, to list the most common skills held by Facebook employees who studied at Carnegie Mellon: <a href="https://app.diffbot.com/search/?query=type%3APerson+employments.%7BisCurrent%3Atrue+employer.name%3A%22Facebook%22%7D+educations.institution.name%3A%22Carnegie+Mellon+University%22+facet%3Askills.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Person employments.{isCurrent:true employer.name:&quot;Facebook&quot;} educations.institution.name:&quot;Carnegie Mellon University&quot; facet:skills.name</code></a>.</p>
<p>When faceting on a numeric field, instead of displaying each possible value of that field, the facet will be performed against a series of smaller ranges that encompass the entire range of values for that field.</p>
<p>For example, to view the number of companies in the banking industry whose company size by maximum number of employees falls into each of a range of possible values, you can query: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+industries%3A%E2%80%9Dbanking%E2%80%9D+facet%3AnbEmployeesMax&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization industries:&quot;banking&quot; facet:nbEmployeesMax</code></a>.</p>
<p><img src="/img/dql/operators1.png" alt="Number of companies in the banking industry whose company size by maximum number of employees falls into each of a range of possible values"></p>
<p>The query then performs the facet against multiple ranges of numerical values, with those ranges encompassing the entire range of possible values for the field we are faceting against. In the results for the above query, you can see the number of companies having between 30 and 40 employees, or between 1,000 and 5,000 employees, for example.</p>
<h3><a class="anchor" aria-hidden="true" id="defining-facet-ranges-for-date-fields"></a><a href="#defining-facet-ranges-for-date-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Facet Ranges for Date Fields</h3>
<p>When faceting on a date field, we can define the size of the time intervals over which aggregated facet values are returned, by adding a &quot;day&quot;, &quot;week&quot;, or &quot;month&quot; specifier.</p>
<p>For example, this query would return a breakdown of the number of articles related to &quot;hacking&quot; published over any particular week:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+title%3A%22hacking%22+facet%5Bweek%5D%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article title:&quot;hacking&quot; facet[week]:date</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="defining-numeric-facet-ranges"></a><a href="#defining-numeric-facet-ranges" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Numeric Facet Ranges</h3>
<p>When faceting on a numeric field, we can also enumerate specific intervals over which we would like to view aggregated values.</p>
<p>For example, to view the number of organizations in the banking industry that have between 100 and 500 employees, or that have between 1,000 and 5,000 employees, you can query:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+industries%3A%22banking%22+facet%5B100%3A500%2C1000%3A5000%5D%3AnbEmployeesMax&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization industries:&quot;banking&quot; facet[100:500,1000:5000]:nbEmployeesMax</code></a>.</p>
<p>We can also use these numeric date ranges to facet by arbitrary date ranges, using epoch/Unix time formats.</p>
<p>For example, to view the number of articles related to &quot;hacking&quot; that were published between 2018 and 2019, we could query:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+title%3A%22hacking%22+facet%5B1514764800000%3A1546300800000%2C1546300800000%3A1577836800000%5D%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article title:&quot;hacking&quot; facet[1514764800000:1546300800000,1546300800000:1577836800000]:date</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="enumerating-specific-facet-grouping-values"></a><a href="#enumerating-specific-facet-grouping-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enumerating Specific Facet Grouping Values</h3>
<p>We can also enumerate the specific values which we would like our facet results to be grouped into.  The facet will be grouped by these values only.</p>
<p>For example, to view a breakdown of the number of organizations located in either San Francisco or Los Angeles, we could query:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+facet%5B%22San+Francisco%22%2C%22Los+Angeles%22%5D%3Alocations.city.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization facet[&quot;San Francisco&quot;,&quot;Los Angeles&quot;]:locations.city.name</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="facet-query-response"></a><a href="#facet-query-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Facet Query Response</h3>
<p>Successful facet queries will return a <code>data</code> object at the top level of the JSON response. The resulting field values are returned in order of the number of matching entities.</p>
<p>Each facet will contain the following fields:</p>
<ul>
<li><code>count</code> (integer) - Number of documents in the overall search query matching this facet value or range.</li>
<li><code>value</code> (string) - Value of the specific facet.</li>
<li><code>callbackQuery</code> (string) - The query to return entities matching the value for this facet.</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="has-operator"></a><a href="#has-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Has Operator</h2>
<p>The <strong>has</strong> operator enables you to only return entities that include a value for that field.</p>
<p>For example: This query returns all organizations located in San Francisco with 5000 or more employees that have a SIC Classification on file in their Diffbot company profile.</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+nbEmployeesMax%3E%3D5000+has%3AsicClassification&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.{city.name:&quot;San Francisco&quot; isCurrent:true} nbEmployeesMax&gt;=5000 has:sicClassification</code></a></p>
<p>You can also combine this with a facet search to view other industry tags (not specific to SIC):</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+nbEmployeesMax%3E%3D5000+has%3AsicClassification+facet%3Acetegories.name+&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.{city.name:&quot;San Francisco&quot; isCurrent:true} nbEmployeesMax&gt;=5000 has:sicClassification facet:categories.name</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="regex-re-operator"></a><a href="#regex-re-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Regex (re) Operator</h2>
<p>The <strong>re</strong> (regex) operator allows you to use regular expressions to match the value of a string field.  Diffbot supports <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/regexp-syntax.html">ElasticSearch's regular expression syntax</a>.</p>
<p>For Example: To return all Organization entities with a name consisting of the string &quot;Faceb&quot;, followed by any number of other characters (including &quot;Facebook, Inc.&quot;, &quot;Facebot&quot;, &quot;Facebooking&quot;, etc.), you can use: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+re%3Aname%3A%22faceb.%2B%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization re:name:&quot;faceb.+&quot;</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="comparison-operators"></a><a href="#comparison-operators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Comparison Operators</h2>
<p>The Knowledge Graph API also supports many of the standard comparison operators found in most languages.</p>
<h3><a class="anchor" aria-hidden="true" id="contains-colon"></a><a href="#contains-colon" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contains (Colon)</h3>
<p>The contains operator tests for equality between a field and its value. The contains operator is not case-sensitive. To perform a case-sensitive search, see the <a href="#strict-operator-equals"><code>strict</code> operator</a>.</p>
<p>If the value is a double-quoted string, the entire string is treated as a single query. If the search string has multiple words, the query will allow for up to one missing word between each consecutive pair of words, and an unlimited number of surrounding words.</p>
<p>For example: To find all Articles whose authors have &quot;Matt&quot; anywhere in their name, you can query: <a href="https://app.diffbot.com/search/?query=type%3AArticle+author%3A%22Matt%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article author:&quot;Matt&quot;</code></a>.</p>
<p>To find all Organizations having “Facebook” within any one of their known aliases, including Facebook, Facebook Advertising, etc.: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+name%3A%22Walmart%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization name:&quot;Facebook&quot;</code></a>.</p>
<p>This will do a “contains” search against all names (<code>allNames</code>) associated with an entity.</p>
<p>To narrow the results, you might use the Corporation sub-type and the strict operator with the formal company name. For example: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+strict%3Aname%3A%22Walmart+Inc.%22+&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization strict:name:&quot;Microsoft Corporation&quot;</code></a>.</p>
<h3><a class="anchor" aria-hidden="true" id="not-equals"></a><a href="#not-equals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Not Equals</h3>
<p>The Not Equals operator <code>!=</code> specifies that entities matching a particular field value should be omitted from the results.</p>
<p>This query returns all Organization entities in San Francisco, except for those companies whose name is &quot;San Francisco State University&quot;:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+name%21%3D%22San+Francisco+State+University%22&amp;from=0&amp;size=50&amp;active_tab=query"><code>type:Organization location.{city.name:&quot;San Francisco&quot; isCurrent:true} name!=&quot;San Francisco State University&quot;</code></a>.</p>
<p>This query returns all Organizations located in the city of San Francisco that are not local businesses:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+types%21%3D%22LocalBusiness%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.city.name:&quot;San Francisco&quot; types!=&quot;LocalBusiness&quot;</code></a></p>
<p>The Not Equals operator can also be used with the regex operator.</p>
<p>This query returns all Organizations whose name does not begin with &quot;University&quot;: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+re%3Aname%21%3D%22University.*%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization re:name!=&quot;University.*&quot;</code></a></p>
<p>To exclude entities compiled from one or more data sources, i.e. origins, specify:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+origins%21%3D%22wikidata.org%22+origins%21%3D%22en.wikipedia.org%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization origins!=&quot;wikidata.org&quot; origins!=&quot;en.wikipedia.org&quot;</code></a></p>
<p>The above example excludes all Organizations whose origins do not include Wikipedia or Wikidata.</p>
<h3><a class="anchor" aria-hidden="true" id="greater--less-than-or-equal-to"></a><a href="#greater--less-than-or-equal-to" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Greater / Less Than (or Equal To)</h3>
<p>We can apply the &gt; (greater than) and &lt; (less than) operators to specify that the value of a field should fall within a particular range.  To include the endpoints of a range, you would use the &gt;= (greater than or equal to) and &lt;= (less than or equal to) operators.</p>
<p>This query will match all Articles published to “<em>.nytimes.</em>” since Sept 1, 2019: <a href="https://app.diffbot.com/search/?query=type%3AArticle+date.timestamp%3E%3D1567350060+pageUrl%3A%22nytimes%22+sortBy%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article date.timestamp&gt;=1567350060 pageUrl:&quot;nytimes&quot; sortBy:date</code></a></p>
<p>This query will match companies who have between 500 and 1000 employees: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+nbEmployeesMin%3E%3D500+nbEmployeesMax%3C%3D1000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization nbEmployeesMin&gt;=500 nbEmployeesMax&lt;=1000</code></a></p>
<h3><a class="anchor" aria-hidden="true" id="strict-operator-equals"></a><a href="#strict-operator-equals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict Operator (Equals)</h3>
<p>The <strong>strict</strong> operator modifies a text search on a field, so that the field value must be exactly equal to the search string in order for a match to occur.</p>
<p>We have seen in all of the examples above how the colon operator (<code>:</code>) is used to match a field with a value, similar to the equals operator in most programming languages.  It is important to note that the colon does not perform an exact match. It will account for a single missing word in the result. To perform an exact match you must apply the strict operator.</p>
<p>For example: To match only Facebook, and not Facebook affiliates:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+strict%3Aname%3A%22Google%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization strict:name:&quot;Facebook&quot;</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="or-operator"></a><a href="#or-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OR Operator</h2>
<p>The or operator allows you to specify a list of values or expressions that can match the field we are querying against.  If any of the fields match, the entire query is a match.</p>
<p>To search across multiple fields enclose the list in parentheses, and add the or keyword.</p>
<p>For example: To search for all companies whose name is &quot;Google&quot; or &quot;Facebook&quot;: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+strict%3Aname%3Aor%28%22Google%22%2C+%22IBM%22%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization strict:name:or(&quot;Google&quot;, &quot;Facebook&quot;)</code></a></p>
<p>The or operator can be used with literal values as well as complete expressions.</p>
<p>For example: To search for all Organizations that either have the exact name &quot;Microsoft Corporation&quot; or have over 100,000 employees, you can query:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization++or%28strict%3Aname%3A%22Microsoft+Corporation%22%2C+nbEmployeesMin%3E100000%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization or(strict:name:&quot;Microsoft Corporation&quot;, nbEmployeesMin&gt;100000)</code></a></p>
<p>Or operators can also be nested.</p>
<p>For example, to return all companies that are either in San Francisco or New York OR that have a CEO who was either educated at Stanford or Harvard OR who was previously or currently employed by Facebook, Google, or Microsoft, specify: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+or%28locations.city.name%3Aor%28%22San+Francisco%22%2C+%22New+York%22%29%2C+ceo.%7Beducations.from.str%3Aor%28%22Stanford%22%2C+%22MIT%22%29+employments.employer.name%3Aor%28%22Microsoft%22%2C+%22IBM%22%2C+%22Google%22%29%7D%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization or(locations.city.name:or(&quot;San Francisco&quot;, &quot;New York&quot;), ceo.{educations.from.str:or(&quot;Stanford&quot;, &quot;Harvard&quot;) employments.employer.name:or(&quot;Facebook&quot;, &quot;Google&quot;, &quot;Microsoft&quot;)})</code></a></p>
<p>For example, to return all articles mentioning data privacy that also mention Facebook, Google, or Microsoft:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+text%3A%22data+privacy%22+text%3Aor%28%22Google%22+%2C+%22Microsoft%22+%2C+%22Facebook%22%29+sortBy%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article text:&quot;data privacy&quot; text:or(&quot;Facebook&quot; , &quot;Google&quot; , &quot;Microsoft&quot;) sortBy:date</code></a></p>
<p>Or use DiffbotIDs and constrain to articles with tagged/linked entities:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AArticle+text%3A%22data+privacy%22+tags.uri%3Aor%28%22https%3A%2F%2Fdiffbot.com%2Fentity%2FCUFq-3WlpNsq0pvfUYWXOEA%22%2C+%22https%3A%2F%2Fdiffbot.com%2Fentity%2FCU2HJUnMcNoWE3nR1cGBcZg%22%2C+%22https%3A%2F%2Fdiffbot.com%2Fentity%2FCbm4UJoSuP1esww1rsLvu9g%22%29+sortBy%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article text:&quot;data privacy&quot; tags.uri:or(&quot;https://diffbot.com/entity/Cbm4UJoSuP1esww1rsLvu9g&quot;, &quot;https://diffbot.com/entity/CUFq-3WlpNsq0pvfUYWXOEA&quot;, &quot;https://diffbot.com/entity/CIsFKrN_ZNLSWsvxdQfWutQ&quot;) sortBy:date</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="minmax-operators"></a><a href="#minmax-operators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MIN/MAX Operators</h2>
<p>The min and max operators allow you to specify the minimum and maximum values, respectively, that a field must have in order to match. The min and max operators apply only to numeric fields.</p>
<p>For example: This query returns all companies with maximum market capitalization of 1 million USD: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+max%3Acapitalization.value%3A1000000+&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization max:capitalization.value:1000000</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="get-operator"></a><a href="#get-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GET Operator</h2>
<p>The <strong>get</strong> operator describes a list of fields to either include (while excluding all other fields), or exclude from the default set of fields.  Each terminal field is returned in the JSON result as an object that contains the fields <strong>confidence</strong>, <strong>origin</strong>, and <strong>value</strong>, instead of just the value.</p>
<p>To include fields, for example, to search for all Organizations, but only return their <code>subsidiaries.locations</code> fields (and all descendants), specify: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+get%3Asubsidiaries.location"><code>type:Organization get:subsidiaries.location</code></a></p>
<p>Or, to return the names of all of Facebook’s subsidiaries:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+name%3A%22Facebook%22+get%3Asubsidiaries.location"><code>type:Organization name:&quot;Facebook&quot; get:subsidiaries.name</code></a></p>
<p>To exclude fields, for example to return all companies with logos and mottos, but omit the phoneNumbers, nbEmployeesMin, nbEmployeesMax fields from each profile matched, specify:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+has%3Alogo+has%3Amotto+get%3A%21nbEmployeesMax%2C%21nbEmployeesMin%2C%21phoneNumbers&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization has:logo has:motto get:!nbEmployeesMax,!nbEmployeesMin,!phoneNumbers</code></a></p>
<p>Or, to return all Organization entities located in San Francisco, but omit the CEO and board members specify:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.city.name%3A%22Mountain+View%22+get%3A%21ceo%2C%21boardMembers&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization location.city.name:&quot;San Francisco&quot; get:!ceo,!boardMembers</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="not-operator"></a><a href="#not-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>NOT Operator</h2>
<p>The NOT operator describes search criteria which must not be true in order for an entity to match.</p>
<p>For example: To search for articles about “hacking” that were not written by Andy Greenberg or Joseph Marks, query:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AArticle+title%3A%22hacking%22+not%28author%3Aor%28%22Andy+Greenberg%22%2C%22The+Canadian+Press%22%29%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article title:&quot;hacking&quot; not(author:or(&quot;Andy Greenberg&quot;,&quot;Joseph Marks&quot;))</code></a></p>
<p>To search for articles about hacking that were not published by the New York Times:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AArticle+title%3A%22khashoggi%22+not%28pageUrl%3A%22nytimes.com%22%29+sortBy%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article title:&quot;hacking&quot; not(pageUrl:&quot;nytimes.com&quot;) sortBy:date</code></a></p>
<p>Note that NOT can be used to negate any query expression, including expressions containing the OR operator.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="near-operator"></a><a href="#near-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Near Operator</h2>
<p>The near operator searches for entities that are located within a particular distance (default 15km) of an Administrative Area.  It is always coupled with a single-field subquery that returns one or more AdministrativeArea entities.</p>
<p>For example: this query returns all Organization entities with &quot;University&quot; in their name that are located within 15km of San Francisco, California:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+near%28id%3A%22ALVqnqwXjOZqEtIVHP2uiow%22%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization near(id:&quot;A8AV-O2v0MBuACAY7pFZzbg&quot;)</code></a></p>
<p><code>near</code> can only operate on a single <code>AdministrativeArea</code> entity, so if the subquery returns more than one result, near will only operate on the most important entity returned (as defined by the importance field in the KG results for that entity).</p>
<p>Example: this query returns all Organizations with “Bank” in their name, that are within 15km of the most important <code>AdministrativeArea</code> named &quot;Springfield&quot;:
<a href="https://app.diffbot.com/search/?query=type%3ALocalBusiness+name%3A%22Starbucks%22+near%28name%3A%22Springfield%22%29&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization name:&quot;Bank&quot; near(name:&quot;Springfield&quot;)</code></a></p>
<p>There are many places in the world named &quot;Springfield&quot; (for example, &quot;Springfield, Illinois&quot; in the United States and &quot;Springfield, Birmingham&quot; in England, but <code>near</code> will compare the <a href="dql-faq">importance</a> fields of all of them and operate only on the most important entity.</p>
<p><code>near</code> accepts an optional distance modifier, to specify the maximum distance from the Administrative Area that a returned entity should be located within. Units for distance can be given in miles (&quot;mi&quot;) or kilometers (&quot;km&quot;).</p>
<p>For example: This query returns all companies whose business is associated in some way with banking, that are also located within 10 miles of San Francisco, CA (the “most important” city named San Francisco):
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+location.%7Bcity.name%3A%22San+Francisco%22+isCurrent%3Atrue%7D+nbEmployeesMax%3E%3D5000+has%3AsicClassification+facet%3Acategories.name&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization categories.name:&quot;banking&quot; near[10mi](name:&quot;San Francisco&quot;)</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="similarto-operator"></a><a href="#similarto-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SimilarTo Operator</h2>
<p>(Note: this is still in experimental phase, so results may be off for some queries. Please use with caution)</p>
<p>The <code>similarTo</code> operator looks for entities that are similar to a query entity based on different criteria. It currently supports Organization only.</p>
<p><code>similarTo</code> accepts id query or type query that can identify an entity. When the type query returns multiple entities, the first one is used as the query entity. Below are some example queries showing how to use it:</p>
<p>Find similar entities to a query entity identified by its id:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28id%3AExADb18D6MAmunRrlVELe8A%29&amp;from=0&amp;size=50&amp;output_format=&amp;kgversion="><code>type:Organization similarTo(id:ExADb18D6MAmunRrlVELe8A)</code></a></p>
<p>Find similar entities to a query entity identified by a typed query:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28type%3AOrganization+homepageUri%3A%22https%3A%2F%2Fwalmart.com%22%29&amp;from=0&amp;size=25&amp;output_format=&amp;kgversion="><code>type:Organization similarTo(type:Organization homepageUri:&quot;https://walmart.com&quot;)</code></a></p>
<p>You can use <code>similarTo</code> to find companies that are similar to a <em>set</em> of companies, for example for finding prospects that are simliar to your current customers. Currently, passing in multiple entities to <code>similarTo</code> is only supported by using the <code>or()</code> operator on a set of <code>ids</code>.</p>
<p>Companies similar to Target and Walmart:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28id%3Aor%28%22ExADb18D6MAmunRrlVELe8A%22%2C+%22EOU1WEvHYN6K83Etm91H9fQ%22%29%29+&amp;size=25"><code>type:Organization similarTo(id:or(&quot;ExADb18D6MAmunRrlVELe8A&quot;, &quot;EOU1WEvHYN6K83Etm91H9fQ&quot;))</code></a></p>
<p>When combined with other operators, we can filter <code>similarTo</code> results accordingly. For example, we can limit the results to organizations in the <code>Online Retailers</code> industry with query <a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28id%3AExADb18D6MAmunRrlVELe8A%29+industries%3A%22Online+Retailers%22&amp;from=0&amp;size=50&amp;output_format=&amp;kgversion="><code>type:Organization similarTo(id:ExADb18D6MAmunRrlVELe8A) industries:&quot;Online Retailers&quot;</code></a> or select organizations with employee number less than 5000: <a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28id%3AExADb18D6MAmunRrlVELe8A%29+nbEmployeesMax%3C5000&amp;from=0&amp;size=50&amp;output_format=&amp;kgversion="><code>type:Organization similarTo(id:ExADb18D6MAmunRrlVELe8A) nbEmployeesMax&lt;5000</code></a>.  This can also be combined with passing in a set, e.g. Companies like Target and Walmart in Germany:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+similarTo%28id%3Aor%28%22ExADb18D6MAmunRrlVELe8A%22%2C+%22EOU1WEvHYN6K83Etm91H9fQ%22%29%29+location.country.name%3A%22Germany%22&amp;size=25"><code>type:Organization similarTo(id:or(&quot;ExADb18D6MAmunRrlVELe8A&quot;, &quot;EOU1WEvHYN6K83Etm91H9fQ&quot;)) location.country.name:&quot;Germany&quot;</code></a></p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="sorting-results"></a><a href="#sorting-results" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sorting Results</h2>
<p>DQL allows you to define the sort order of your results in various ways, including sorting on a particular response field, reverse-sorting on a field, and sorting in a random order.</p>
<h3><a class="anchor" aria-hidden="true" id="sortby"></a><a href="#sortby" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SORTBY</h3>
<p>The <code>sortBy</code> operator is used to specify that results should be sorted by a particular field.  Note that results are sorted in ascending order by default.</p>
<p>For example: This query will match all organizations located in the city of San Francisco, and return them in ascending order by name:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+isPublic%3Atrue+location.city.name%3A%22Los+Angeles%22+sortBy%3Aname&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization isPublic:true location.city.name:&quot;San Francisco&quot; sortBy:name</code></a></p>
<h3><a class="anchor" aria-hidden="true" id="revsortby"></a><a href="#revsortby" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>REVSORTBY</h3>
<p>The <code>revSortBy</code> operator is used to specify that results should be sorted according to a particular field, but in descending order.</p>
<p>For example: To search for all articles published by New York Times and return them in order by date published, from oldest to most recent, specify:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+pageUrl%3A%22newsweek.com%22+revSortBy%3Adate&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article pageUrl:&quot;nytimes.com&quot; revSortBy:date</code></a></p>
<h3><a class="anchor" aria-hidden="true" id="random-sorting"></a><a href="#random-sorting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RANDOM SORTING</h3>
<p>We can use the parameter <code>sortBy:random</code> to have the results returned in a totally random order.</p>
<p>For example: To retrieve all organizations who have ever had an address in the United States, and return them in a random order, you can specify:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+locations.country.name%3A%22United+States%22+sortBy%3Arandom&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization locations.country.name:&quot;United States&quot; sortBy:random</code></a></p>
<h3><a class="anchor" aria-hidden="true" id="random-order-with-seed"></a><a href="#random-order-with-seed" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RANDOM ORDER WITH SEED</h3>
<p>We can use the parameter <code>sortBy:randomSeed</code> with some integer value to have the results returned in a predictable and reproducible random order.</p>
<p>For Example: This query will match all organizations with a presence in the United States, and return them in a predictably random order:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+locations.country.name%3A%22United+States%22+sortBy%3ArandomSeed%3A501&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization locations.country.name:&quot;United States&quot; sortBy:randomSeed:501</code></a></p>
<p>The key thing to note here is that this query will always produce the exact same sort order, and as long as the set of results has not changed (as a result of a KG update) the response will always be identical.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="dates-and-timestamps"></a><a href="#dates-and-timestamps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dates and Timestamps</h2>
<p>Dates in the knowledge graph are typically given as an epoch timestamp, representing the number of seconds or milliseconds since 00:00:00 UTC on January 1, 1970.  Such a date field will contain the following fields:</p>
<table>
<thead>
<tr><th>Field Name</th><th>Example Value</th><th>Field Description</th></tr>
</thead>
<tbody>
<tr><td>str</td><td>d2018-10-04T08:11:28</td><td>A string representation of the given timestamp</td></tr>
<tr><td>precision</td><td>4</td><td>The arithmetic precision of the given timestamp.</td></tr>
<tr><td>timestamp</td><td>1538640688000</td><td>The number of seconds or milliseconds since 00:00:00 UTC on January 1, 1970.  Which unit is used can be determined by examining the precision field.  A value of 4 would indicate that the timestamp is in milliseconds, while a precision of 1 would indicate seconds</td></tr>
</tbody>
</table>
<p>Here's an example in JSON:</p>
<pre><code class="hljs css language-json">"fieldXXX": {
  "str": "d2018-10-04T08:11:28",
  "precision": 4,
  "timestamp": 1538640688000
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="crawl-timestamps"></a><a href="#crawl-timestamps" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Crawl Timestamps</h3>
<p>Each entity in the KG also includes a field that represents the last time that any of that entity’s origins were crawled and extracted.  This field therefore represents the maximum possible freshness of any individual data point.</p>
<p>The name of the crawl timestamp field varies depending on the entity type.  The table below explains which field name is associated with each entity type:</p>
<p><img src="/img/dql/table.jpg" alt=""></p>
<p>It should be noted that all crawl timestamps are represented in seconds.</p>
<h3><a class="anchor" aria-hidden="true" id="querying-for-dates"></a><a href="#querying-for-dates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Querying for Dates</h3>
<h4><a class="anchor" aria-hidden="true" id="date-field-expansion"></a><a href="#date-field-expansion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Date Field Expansion</h4>
<p>When referring to any date/timestamp field (not including crawl timestamps) in a query, if the timestamp subfield is omitted from the field specification, the field in the query will be expanded to include the timestamp subfield. For example, these two queries are equivalent, with the first being automatically expanded to the second:</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AOrganization+foundingDate%3C1438387200000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization foundingDate&lt;1438387200000</code></a> vs <a href="https://app.diffbot.com/search/?query=type%3AOrganization+foundingDate.timestamp%3C1438387200000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization foundingDate.timestamp&lt;1438387200000</code></a></p>
<h4><a class="anchor" aria-hidden="true" id="epoch-vs-date-literal"></a><a href="#epoch-vs-date-literal" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Epoch vs. Date Literal</h4>
<p>You can represent a timestamp in a query using an Epoch timestamp, in either milliseconds or seconds, given as an integer.</p>
<p>Example (these 2 queries are equivalent):</p>
<p><a href="https://app.diffbot.com/search/?query=type%3AArticle+estimatedDate.timestamp%3C1438387200000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article estimatedDate.timestamp&lt;1438387200000</code></a> vs <a href="https://app.diffbot.com/search/?query=type%3AArticle+estimatedDate.timestamp%3C1438387200&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article estimatedDate.timestamp&lt;1438387200</code></a></p>
<p>Timestamps can also be represented as a literal date string (a “Date Literal”) with one of the following formats:</p>
<ul>
<li>MM-dd-yyyy (ex. “08-01-2015”)</li>
<li>MM/dd/yyyy (ex. “08/01/2015”)</li>
<li>yyyy-MM-dd (ex. “2015-08-01”)</li>
<li>yyyy/MM/dd (ex. “2015/08/01”)</li>
</ul>
<p>For example, do view all organizations that were founded on New Years Day in the year 2000, we could query:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+foundingDate%3A%2201%2F01%2F2000%22&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization foundingDate:&quot;01/01/2000&quot;</code></a></p>
<p>Note that equivalent min/max and greater/less than expressions can be used interchangeably, whether we are using an epoch timestamp or a Date Literal to represent the timestamp in our query. For example, these 4 queries are all equivalent:</p>
<ul>
<li><a href="https://app.diffbot.com/search/?query=type%3AOrganization+foundingDate%3C%3D%272015-08-01%27&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization foundingDate&lt;='2015-08-01'</code></a></li>
<li><a href="https://app.diffbot.com/search/?query=type%3AOrganization+max%3AfoundingDate.timestamp%3A%272015-08-01%27&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization max:foundingDate.timestamp:'2015-08-01'</code></a></li>
<li><a href="https://app.diffbot.com/search/?query=type%3AOrganization+foundingDate%3C%3D1438387200000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization foundingDate&lt;=1438387200000</code></a></li>
<li><a href="https://app.diffbot.com/search/?query=type%3AOrganization+max%3AfoundingDate.timestamp%3A1438387200000&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization max:foundingDate.timestamp:1438387200000</code></a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="special-time-period-literals"></a><a href="#special-time-period-literals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Special Time Period Literals</h4>
<p>For a Crawl Timestamp, or for the date field of an Article entity, we can use a Time Period Literal to represent some length of time.  A Time Period Literal consists of a numeric value and a unit specifier.  For example, the Time Period Literal “4h” represents 4 hours.  These are the time units that are supported:</p>
<ul>
<li>s: seconds</li>
<li>m: minutes</li>
<li>h: hours</li>
<li>d: days</li>
<li>w: weeks</li>
<li>y: 365 days</li>
</ul>
<p>Example: To find all Articles that were published at least 4 hours ago: <a href="https://app.diffbot.com/search/?query=type%3AArticle+date%3E%3D4h&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article date&gt;=4h</code></a></p>
<p>Example: To find all Articles for which any origin was crawled within the last 4 hours:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+lastCrawlTime%3C%3D4h&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article lastCrawlTime&lt;=4h</code></a></p>
<p>Example: To find all Organizations for which any origin was crawled within the last 365 days:
<a href="https://app.diffbot.com/search/?query=type%3AOrganization+crawlTimestamp%3C%3D1y&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Organization crawlTimestamp&lt;=1y</code></a></p>
<h4><a class="anchor" aria-hidden="true" id="special-handling-for-article-date-fields"></a><a href="#special-handling-for-article-date-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Special handling for Article “date” fields</h4>
<p>Every Article entity has a <code>date</code> field representing the publication date of the article.  We can reference this field as either <code>date</code> or <code>date.str</code> in our DQL query.</p>
<h2><a class="anchor" aria-hidden="true" id="querying-for-articles-by-sentiment-towards-a-particular-topic"></a><a href="#querying-for-articles-by-sentiment-towards-a-particular-topic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Querying for Articles by Sentiment Towards a Particular Topic</h2>
<p>It is possible to search for articles by their general sentiment toward a particular topic.  We do this by querying against the sentiment of a particular article tag.</p>
<p>For example, to view a list of articles which portray a view of Congress that is at least slightly negative, we could query:
<a href="https://app.diffbot.com/search/?query=type%3AArticle+tags.%7Blabel%3A%22Congress%22+sentiment%3C0%7D&amp;from=0&amp;size=50&amp;active_tab=query&amp;kgversion="><code>type:Article tags.{label:&quot;Congress&quot; sentiment&lt;0}</code></a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated by Zhaochen Guo</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/kg-filtering"><span class="arrow-prev">← </span><span>Filter Data Output</span></a><a class="docs-next button" href="/docs/en/dql-workflows"><span>DQL Workflow Example</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#query-types">Query Types</a><ul class="toc-headings"><li><a href="#id">ID</a></li><li><a href="#type">Type</a></li></ul></li><li><a href="#querying-with-multiple-fields">Querying with Multiple Fields</a></li><li><a href="#nested-query">Nested Query</a></li><li><a href="#facets">Facets</a><ul class="toc-headings"><li><a href="#defining-facet-ranges-for-date-fields">Defining Facet Ranges for Date Fields</a></li><li><a href="#defining-numeric-facet-ranges">Defining Numeric Facet Ranges</a></li><li><a href="#enumerating-specific-facet-grouping-values">Enumerating Specific Facet Grouping Values</a></li><li><a href="#facet-query-response">Facet Query Response</a></li></ul></li><li><a href="#has-operator">Has Operator</a></li><li><a href="#regex-re-operator">Regex (re) Operator</a></li><li><a href="#comparison-operators">Comparison Operators</a><ul class="toc-headings"><li><a href="#contains-colon">Contains (Colon)</a></li><li><a href="#not-equals">Not Equals</a></li><li><a href="#greater--less-than-or-equal-to">Greater / Less Than (or Equal To)</a></li><li><a href="#strict-operator-equals">Strict Operator (Equals)</a></li></ul></li><li><a href="#or-operator">OR Operator</a></li><li><a href="#minmax-operators">MIN/MAX Operators</a></li><li><a href="#get-operator">GET Operator</a></li><li><a href="#not-operator">NOT Operator</a></li><li><a href="#near-operator">Near Operator</a></li><li><a href="#similarto-operator">SimilarTo Operator</a></li><li><a href="#sorting-results">Sorting Results</a><ul class="toc-headings"><li><a href="#sortby">SORTBY</a></li><li><a href="#revsortby">REVSORTBY</a></li><li><a href="#random-sorting">RANDOM SORTING</a></li><li><a href="#random-order-with-seed">RANDOM ORDER WITH SEED</a></li></ul></li><li><a href="#dates-and-timestamps">Dates and Timestamps</a><ul class="toc-headings"><li><a href="#crawl-timestamps">Crawl Timestamps</a></li><li><a href="#querying-for-dates">Querying for Dates</a></li></ul></li><li><a href="#querying-for-articles-by-sentiment-towards-a-particular-topic">Querying for Articles by Sentiment Towards a Particular Topic</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/diffbot_white.svg" alt="Docs Suite" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/api-basics-index">Extraction</a><a href="/docs/en/cb-basics-index">Crawling</a><a href="/docs/en/kg-index">Knowledge Graph</a><a href="/docs/en/explain-gdpr">Diffbot and GDPR</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/diffbot" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/diffbot" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="/help">Help</a><a href="https://github.com/diffbot">GitHub</a></div></section><a href="https://diffbot.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/diffbot_white.svg" alt="Diffbot.com" width="170" height="45"/></a><section class="copyright">Copyright © 2021 Diffbot.com</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2c24e5e78d724e77c46ef1b720700177',
                indexName: 'diffbot',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>