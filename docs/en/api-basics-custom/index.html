<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Custom API Basic Usage · Docs Suite</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Basic usage of Diffbot&#x27;s API Customization interface"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Custom API Basic Usage · Docs Suite"/><meta property="og:type" content="website"/><meta property="og:url" content="https://diffbot.github.io/"/><meta property="og:description" content="Basic usage of Diffbot&#x27;s API Customization interface"/><meta property="og:image" content="https://diffbot.github.io/img/diagram.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://diffbot.github.io/img/diagram.svg"/><link rel="shortcut icon" href="/img/diffbot-head.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/app.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/diffbot_white.svg" alt="Docs Suite"/><h2 class="headerTitleWithLogo">Docs Suite</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/error-intro" target="_self">Debugging</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Basics</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Custom API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Basics</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/api-intro-custom">Introduction</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/api-basics-custom">Basic Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/en/tutorials-custom-video">Custom API Video Tutorials</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Recipes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/api-usage-custom">Index</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides-backup-restore-rules">Back up / restore custom APIs</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides-custom-headers-api">Sending Custom Headers with API Calls</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides-multidomain">Applying the same API to multiple domains</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/api-custom">Custom APIs</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api-selectors-filters">Custom API Selectors and Filters</a></li><li class="navListItem"><a class="navItem" href="/docs/en/api-managing-rules-programmatically">Managing Custom Rules Programmatically</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/diffbot/docs/edit/master/docs/api-basics-custom.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Custom API Basic Usage</h1></header><article><div><span><p>Here’s how to make a correction with the API Customization toolkit if you have a problem with a particular site.</p>
<h2><a class="anchor" aria-hidden="true" id="find-a-problematic-url"></a><a href="#find-a-problematic-url" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Find a problematic URL</h2>
<p>Start with a web page that is exhibiting the problem, then visit the <a href="https://app.diffbot.com">dashboard</a>, and enter the Custom API section and click Create New (or go there <a href="https://app.diffbot.com/custom/create/">directly</a>). Pick the type of API you want to process this page with, and enter the problematic URL.</p>
<p><img src="/img/custom-api-tut/01.jpg" alt="Creating a new API and entering a link into the Test URL field"></p>
<p>The example above processes <a href="https://wiki.polkadot.network/docs/en/learn-staking">this wiki page</a> which has a clearly defined author at the bottom, but this wasn't picked up by Diffbot as evident by the results in the image below.</p>
<p><img src="/img/custom-api-tut/02.jpg" alt="Author is missing from extraction"></p>
<p>Edit the field you wish to correct.</p>
<p>Click “edit” next to the field you wish to adjust. In our example, we’ll edit the <code>author</code> field.</p>
<p><img src="/img/custom-api-tut/03.jpg" alt="Edit field popup with preview window"></p>
<p>In the resulting preview window, you can either manually enter a <a href="https://www.w3schools.com/cssref/css_selectors.asp">CSS Selector</a>, or point-and-click to choose the correct element. A preview of the output will be displayed at the top of the screen.</p>
<p>In our example case, the CSS selector we want is <code>.docLastUpdate</code>:</p>
<p><img src="/img/custom-api-tut/04.jpg" alt="Selector is producing a result"></p>
<blockquote>
<p>Note: By default the Custom API Toolkit will retrieve all content matching your selector. You can  select multiple items with different selectors if you wish, by comma-separating your selectors.</p>
<p>For example, if you are trying to extract two different types of images, one with the ID <code>#featureImage</code> and perhaps additional images with the class <code>.inlineImage</code>, simply use the selector: <code>#featureImage, .inlineImage</code></p>
<p>Your API results will include all matching images from either selector.</p>
</blockquote>
<p>We're getting some extra information! Diffbot's API customization allows us to apply regular expression filters to some output in order to tweak it to our very specific needs. Let's apply one and clear up the unneeded information.</p>
<p>Click on <em>Filters</em>, select <em>Replace</em>, under value put <code>^(.*)by\s(.*)$</code> and under Replace with put <code>$2</code>.</p>
<p><img src="/img/custom-api-tut/05.jpg" alt="Regular expression filter applied"></p>
<p>The above means &quot;split the result into two groups separated by <code>by</code>, and then replace the whole output with the content of the second group&quot;.</p>
<blockquote>
<p>Note: if you're not familiar with regular expressions, fear not - they aren't needed often. But if you're curious and want to learn more about this powerful string manipulation language, <a href="https://regex101.com">Regex101</a> is an excellent playground.</p>
</blockquote>
<p>Click <em>Save</em> to save and apply your rule.</p>
<p>Once saved, your rule will take immediate effect for API calls (a) using the specified API and (b) matching the <a href="guides-domain-regex">domain regular expression</a>.</p>
<p><img src="/img/custom-api-tut/06.jpg" alt="Accurate result given by modified API"></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated by Zhaochen Guo</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/api-intro-custom"><span class="arrow-prev">← </span><span>Introduction</span></a><a class="docs-next button" href="/docs/en/tutorials-custom-video"><span>Custom API Video Tutorials</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#find-a-problematic-url">Find a problematic URL</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/diffbot_white.svg" alt="Docs Suite" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/api-basics-index">Extraction</a><a href="/docs/en/cb-basics-index">Crawling</a><a href="/docs/en/kg-index">Knowledge Graph</a><a href="/docs/en/explain-gdpr">Diffbot and GDPR</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/diffbot" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/diffbot" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="/help">Help</a><a href="https://github.com/diffbot">GitHub</a></div></section><a href="https://diffbot.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/diffbot_white.svg" alt="Diffbot.com" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Diffbot.com</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2c24e5e78d724e77c46ef1b720700177',
                indexName: 'diffbot',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>