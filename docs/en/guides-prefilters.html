<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using Prefilters to Ignore Website Elements · Docs Suite</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Some websites sometimes confuse Diffbot with extra elements that don&#x27;t belong in the extraction. Prefilters are a new feature which allows users to completely remove certain DOM elements from consideration - no more pesky GDPR, cookie, or newsletter popups, and no more ads and &quot;related&quot; content!"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using Prefilters to Ignore Website Elements · Docs Suite"/><meta property="og:type" content="website"/><meta property="og:url" content="https://diffbot.github.io/"/><meta property="og:description" content="Some websites sometimes confuse Diffbot with extra elements that don&#x27;t belong in the extraction. Prefilters are a new feature which allows users to completely remove certain DOM elements from consideration - no more pesky GDPR, cookie, or newsletter popups, and no more ads and &quot;related&quot; content!"/><meta property="og:image" content="https://diffbot.github.io/img/diagram.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://diffbot.github.io/img/diagram.svg"/><link rel="shortcut icon" href="/img/diffbot-head.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/app.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/diffbot_white.svg" alt="Docs Suite"/><h2 class="headerTitleWithLogo">Docs Suite</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/error-intro" target="_self">Debugging</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/diffbot/docs/edit/master/docs/guides-prefilters.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Using Prefilters to Ignore Website Elements</h1></header><article><div><span><p>Prefilters allow you to make Diffbot completely ignore certain elements on some websites. This is very useful for ads, popups, and other pesky UI elements that might confuse Diffbot while extracting information.</p>
<p>There are two ways to add prefilters to your rules: via the <a href="tutorials-new-dashboard">new dashboard</a>, or through the <a href="guides-backup-restore-rules">backup and restore method</a>.</p>
<p>We'll cover the simpler approach first - the new dashboard.</p>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>Let's assume we want to process <a href="https://www.thirdsector.co.uk/rspca-union-unable-agree-date-talks-avert-possible-industrial-action/management/article/1669860">this URL</a> as an <a href="api-article">Article</a>. The result we get from Diffbot is:</p>
<p><img src="/img/prefilters/02.png" alt="Sparse results"></p>
<p>The text is missing. Let's look at the website and see what might be going on.</p>
<p><img src="/img/prefilters/01.png" alt="Popup on page"></p>
<p>The website has a rather invasive overlay and popup. This is what's probably interfering with Diffbot's extraction. Prefilters to the rescue!</p>
<h2><a class="anchor" aria-hidden="true" id="finding-the-selectors"></a><a href="#finding-the-selectors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Finding the selectors</h2>
<p>Prefilters block page elements by targeting their CSS selectors. We can find the selectors by using a browser's dev tools and right clicking on the element we want to remove, then selecting &quot;Inspect element&quot;. The dev tools will highlight that element in the HTML of the page, but that's usually not enough - often we need to target the parent of that element, a level or two above. For best results, keep deleting elements in the DOM until the undesired elements disappear. In this case, the selectors were <code>.modalOverlay</code> and <code>.modal</code>, as seen in the search process below.</p>
<p><img src="/img/prefilters/pf.gif" alt="Searching for CSS selectors"></p>
<h2><a class="anchor" aria-hidden="true" id="blocking-the-elements-in-the-ui"></a><a href="#blocking-the-elements-in-the-ui" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Blocking the elements in the UI</h2>
<p>To block the elements in the UI, you need <a href="tutorials-new-dashboard">access to the new dashboard</a>. Once in, access the Custom API menu option in the left sidebar. Create a new API, enter the URL above, and Create it.</p>
<p><img src="/img/prefilters/03.png" alt="Adding a new rule"></p>
<p>Once loaded, open the &quot;Other Settings&quot; tab and scroll down to Prefilters. In that text area, enter <code>.modal, .modalOverlay</code>. Scroll to the bottom and press save.</p>
<p><img src="/img/prefilters/04.png" alt="Adding prefilters"></p>
<p>Once the preview reloads, you should already see results in the <code>text</code> and <code>html</code> fields. And indeed, if you use the top-right option to make an &quot;API Call&quot;, you will notice the article is now extracted properly.</p>
<p><img src="/img/prefilters/05.png" alt="Extracted article"></p>
<h2><a class="anchor" aria-hidden="true" id="blocking-the-elements-programmatically"></a><a href="#blocking-the-elements-programmatically" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Blocking the elements programmatically</h2>
<p>If you'd like to do these blocks programmatically and not through the UI of the new dashboard, follow the <a href="guide-backup-restore-rules">backup and restore process for rules</a> along with the guide to <a href="https://docs.diffbot.com/docs/en/api-managing-rules-programmatically">managing your Custom rules programmatically</a>. In short, you would POST the following JSON object to the <code>https://api.diffbot.com/v3/custom?token=MYTOKEN</code> endpoint:</p>
<pre><code class="hljs css language-json">{
    prefilters: [
        ".modal",
        ".modelOverlay"
    ],
    api: "/api/article",
    urlPattern: "(http(s)?://)?(.*\.)?www.thirdsector.co.uk.*",
    testUrl: "https://www.thirdsector.co.uk/rspca-union-unable-agree-date-talks-avert-possible-industrial-action/management/article/1669860"
}
</code></pre>
<p>The response to this request will contain a hash. You can later use this hash to update the rule as specified in <a href="https://docs.diffbot.com/docs/en/api-managing-rules-programmatically">managing your Custom rules programmatically</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated by Bruno Skvorc</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#example">Example</a></li><li><a href="#finding-the-selectors">Finding the selectors</a></li><li><a href="#blocking-the-elements-in-the-ui">Blocking the elements in the UI</a></li><li><a href="#blocking-the-elements-programmatically">Blocking the elements programmatically</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/diffbot_white.svg" alt="Docs Suite" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/api-basics-index">Extraction</a><a href="/docs/en/cb-basics-index">Crawling</a><a href="/docs/en/kg-index">Knowledge Graph</a><a href="/docs/en/explain-gdpr">Diffbot and GDPR</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/diffbot" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/diffbot" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="/help">Help</a><a href="https://github.com/diffbot">GitHub</a></div></section><a href="https://diffbot.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/diffbot_white.svg" alt="Diffbot.com" width="170" height="45"/></a><section class="copyright">Copyright © 2024 Diffbot.com</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '2c24e5e78d724e77c46ef1b720700177',
                indexName: 'diffbot',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>